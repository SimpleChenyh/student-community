<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.manage.mapper.reportActivity.ReportActivityMapper"> 
<!-- 举报 -->
    <resultMap type="com.manage.entity.ReportActivity" id="reportActivityResultMap">
            <id column="report_activity_id" property="reportActivityid"/>
            <result column="report_date" property="reportDate"/>
             <collection property="stu" javaType="com.manage.entity.Student">
                <id column="stu_id" property="stuid" />
                <result column="stu_name" property="stuName" />
                <result column="stu_sex" property="stuSex" />
                <result column="stu_birthday" property="stuBirthday" />
                <result column="stu_native_place" property="stuNativePlace" />
                <result column="role_name" property="roleName"/>
             </collection>
             <collection property="activity" javaType="com.manage.entity.Activity">
                <id column="activity_id" property="activityid"/>
             </collection>
   </resultMap>
   <!-- 判断是否举报 -->
   <select id="selectreportActivity" parameterType="Integer"  resultMap="reportActivityResultMap">
SELECT report_activity_id,student.stu_id,activity.activity_id,report_date from report_activity INNER JOIN student
on student.stu_id = report_activity.stu_id inner JOIN activity
on activity.activity_id = report_activity.activity_id
where activity.activity_id = #{_parameter} and student.stu_id = 10002
   </select>
   <!-- 举报活动 -->
    <insert id="reportActivity" parameterType="com.manage.entity.ReportActivity">
        insert into report_activity(stu_id,activity_id) VALUES(#{stu.stuid},#{activity.activityid})
    </insert>
</mapper>